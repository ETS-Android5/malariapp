Language: android
android:
  components:
    # Build tools and android version.
    - build-tools-22.0.1
    - android-22

    # Additional dependencies.
    - extra-google-google_play_services
    - extra-google-m2repository
    - extra-android-m2repository

    # Emulator image.
    - sys-img-armeabi-v7a-android-21
    - sys-img-armeabi-v7a-android-22
  licenses:
    - android-sdk-license-5be876d5

jdk:
  - oraclejdk7

branches:
  - master
  - feature-travis_test

notifications:
  slack:
    secure: TT41Hj5/zVuVU4dIXzx+QpUUWm6dZT8M3Z9evZz5Ar30tn9afSiCl0NKPu5ZL9HTaxifTP2A7Sos89fVDOdxaQLBKwKM8ZY6eIwSooQUciKpQOGYRYk2nRZkJbqh4eGXARZ5+BjjFKFVvEJ0Gc3FCdlRwNsTBomUQZ1pykruECuQB9WQTX13U2N6DKx8dA1xR0froZU3EtvLh0LZzU35sXysfvtfUQZ+V2OnErvOjmHiBhrVzUNGTanaYZNt0zVxK2toROaYGIsj8KQpSRe90bgdhSrQ69ladwDwORKNgmmuQqbq7L3TsZq0HVg8HPhdcG5FTrQomPfgpgwYMwacaUGdDk6EPow6KBOZZR0niYFLWUEq5InWISgBRcIuH4IcQGzko+sXS/yD2r9qbuTOYTqq8qniWOovEYYMhPbOAIM2YWRTSChDUetny7cqMT/0awq4BMgnl9t97AUG6tiTbIWWGbF8TR5mheyoBYtk3X9PVAlqaHA9EFcgL4xf8g0zUhJbQ/3y6RVerSNeyWvZUMamCUhw2XVq6ep1+efrsXBKO4O+Gjhvv4USasZeFfI+TQgcefBGH3PYg9u4uIVh0nEh4QsxwaqYscJlVy1fA4QOO2XAR8SNQVp41r2OqeTMheaFCGrIF+pct08Ll1GqU7eZaptTK87D7bguCf9XH/Q=
  email: true


# Emulator Management: Create, Start and Wait
before_script:
  - git submodule update --init --recursive --depth=10
  - echo no | android create avd --force -n test -t android-22 --abi armeabi-v7a
  - emulator -avd test -no-skin -no-audio -no-window &
  - android-wait-for-emulator
  - adb shell input keyevent 82 &

# Launching build process.
script:
  - ./gradlew build connectedCheck --stacktrace
